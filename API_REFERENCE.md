## API Reference

This is a quick reference for the steamutils package API.

CAUTION: This code was generated by an LLM. It has not been thoroughly tested or verified for production use. Please use with caution and verify behavior in your specific use case before deployment.

### Main Types

#### SteamReader

Main entry point for querying Steam data.

Methods:

- GetAllInstalledApps() ([]InstalledApp, error)
- GetInstalledAppByID(appID string) (*InstalledApp, error)
- FindAppIDPath(appID string) (string, error)
- FindAppIDBuildID(appID string) (string, error)
- GetSteamPath() string
- GetLibraryVdfPath() string
- GetLibraryVdfMap() *orderedmap.OrderedMap

#### SteamReaderConfig

Configuration structure for SteamReader creation.

Fields:

- LibraryVdfPathFinder: Custom path finder function
- SteamPathFinder: Custom Steam path detection function
- CustomLibraryVdfPath: Override libraryfolders.vdf location
- CustomSteamPath: Override Steam installation path
- FormatSteamPath: Enable path normalization

#### InstalledApp

Metadata for an installed application.

Fields:

- AppID: string - Application identifier
- Name: string - Display name
- InstallDir: string - Installation directory name
- FullPath: string - Complete filesystem path
- BuildID: string - Build version
- SizeOnDisk: int64 - Size in bytes
- LastUpdated: int64 - Unix timestamp
- LastPlayed: int64 - Unix timestamp or 0
- LibraryPath: string - Library containing this app
- InstalledDepots: []InstalledDepot - Content packages

#### InstalledDepot

Metadata for a content depot.

Fields:

- DepotID: string - Depot identifier
- Manifest: string - Manifest identifier
- Size: int64 - Size in bytes
- DLCAppID: string - DLC app ID or empty for base game

### Functions

#### NewSteamReader

```go
func NewSteamReader(config SteamReaderConfig) (SteamReader, error)
```

Creates and initializes a new SteamReader. Detects Steam paths and loads library configuration.

Errors: Returns error if Steam not found or libraryfolders.vdf cannot be read.

#### Unmarshal (VDF Parser)

```go
func Unmarshal(data []byte) (*orderedmap.OrderedMap, error)
```

Parses VDF format data into an OrderedMap structure.

#### Marshal (VDF Generator)

```go
func Marshal(m *orderedmap.OrderedMap) ([]byte, error)
```

Converts OrderedMap back into VDF format bytes.

### Common Patterns

Get all apps and their sizes:

```go
reader, err := NewSteamReader(SteamReaderConfig{})
if err != nil {
    log.Fatal(err)
}

apps, err := reader.GetAllInstalledApps()
if err != nil {
    log.Fatal(err)
}

var totalSize int64
for _, app := range apps {
    totalSize += app.SizeOnDisk
    fmt.Printf("%s: %d bytes\n", app.Name, app.SizeOnDisk)
}
fmt.Printf("Total: %d bytes\n", totalSize)
```

Find an app and check its details:

```go
app, err := reader.GetInstalledAppByID("730") // Counter-Strike 2
if err != nil {
    log.Printf("Not found: %v", err)
    return
}

fmt.Printf("Name: %s\n", app.Name)
fmt.Printf("Size: %d bytes\n", app.SizeOnDisk)
fmt.Printf("Build: %s\n", app.BuildID)
fmt.Printf("Location: %s\n", app.FullPath)
```

Get apps for a specific library:

```go
libFoldersVal, _ := reader.GetLibraryVdfMap().Get("libraryfolders")
libFolders := libFoldersVal.(*orderedmap.OrderedMap)

for _, libKey := range libFolders.Keys() {
    libVal, _ := libFolders.Get(libKey)
    lib := libVal.(*orderedmap.OrderedMap)
    
    path, _ := lib.Get("path")
    fmt.Printf("Library: %v\n", path)
}
```

Use custom Steam path:

```go
config := SteamReaderConfig{
    CustomSteamPath: "/mnt/steam",
}
reader, err := NewSteamReader(config)
```

### Platform-Specific Functions

These are conditionally compiled based on build tags:

Windows (user-facing):
- GetSteamPath() - reads registry
- GetAutoLoggedInSteamUsername() - reads registry

Linux (user-facing):
- GetSteamPath() - checks standard paths and environment
- GetAutoLoggedInSteamUsername() - reads loginusers.vdf

macOS (user-facing):
- GetSteamPath() - checks home library
- GetAutoLoggedInSteamUsername() - reads loginusers.vdf

All platforms define:
- pathSeparator() - returns "/" or "\"

### Error Types

The package returns standard Go error types:

- os.PathError for file operations
- fmt.Errorf for parsing errors
- custom error messages for missing data

Check error with:

```go
if err != nil {
    if errors.Is(err, fs.ErrNotExist) {
        // File not found
    } else {
        // Other error
    }
}
```

### Constants

No named constants are exported. String keys for VDF maps:

- "libraryfolders" - top level key for library config
- "0", "1", etc. - library indices
- "path" - library directory path
- "apps" - apps in a library
- "AppState" - application manifest root
- "name", "buildid", "installdir", "SizeOnDisk" - app metadata
- "InstalledDepots" - depot information
- "manifest", "size", "dlcappid" - depot metadata

### Version Information

This documentation covers the current implementation. The package does not declare a version constant.

Check the go.mod file for dependency versions.
